<style>
    /* カスタムプロパティ（CSS変数）定義 */
    :root {
      /* カラーパレット */
      --color-primary: #8be9fd;
      --color-primary-dark: #6272a4;
      --color-background: #1a1b26;
      --color-surface: rgba(26, 27, 38, 0.7);
      --color-text: #c0caf5;
      --color-text-secondary: #6272a4;
      --color-text-muted: rgba(255, 255, 255, 0.6);
      --color-border: rgba(255, 255, 255, 0.1);
      --color-accent: #facc15;
      --color-success: #50fa7b;
      --color-warning: #ffb86c;
      --color-error: #ff5555;

      /* アニメーション */
      --duration-fast: 0.2s;
      --duration-normal: 0.3s;
      --duration-slow: 0.5s;
      --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
      --ease-in-out: cubic-bezier(0.645, 0.045, 0.355, 1);

      /* サイズ */
      --border-radius: 0.75rem;
      --border-radius-lg: 1rem;
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
      --shadow-glow: 0 0 15px var(--color-primary);

      /* ガラスエフェクト */
      --glass-bg: var(--color-surface);
      --glass-border: 1px solid var(--color-border);
      --glass-blur: blur(12px);
    }

    /* 基本スタイル */
    body {
      color: var(--color-text);
      background-color: var(--color-background);
      margin: 0; /* remove default margin for minimal top spacing */
    }

    /* ガラスパネル効果 */
    .glass-panel {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      border: var(--glass-border);
    }
    /* インタラクティブ要素の共通スタイル */
    .interactive-element {
      transition: all var(--duration-fast) var(--ease-out);
      border-radius: var(--border-radius);
    }

    /* ゲームボタンのスタイル */
    .game-btn {
      transition: all var(--duration-fast) var(--ease-out);
      border-radius: var(--border-radius);
      border-bottom-width: 4px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    }
    .game-font {
      font-family: 'Press Start 2P', cursive;
    }
    .game-btn:not(:disabled):hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: var(--shadow-glow);
    }
    .game-btn:active:not(:disabled) {
      transform: translateY(2px);
      border-bottom-width: 2px;
      box-shadow: none;
    }

    /* フォーム要素 */
    #classFilter, #sortOrder {
      background-color: var(--color-primary-dark);
      border: var(--glass-border);
      color: var(--color-text);
      border-radius: var(--border-radius);
      padding: 0.25rem 0.5rem;
    }

    /* フォーカス状態 */
    :focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
      border-radius: var(--border-radius);
    }

    /* レイアウト */
    header { position: sticky; top: 0; z-index: 5; }

    /* 回答カード */
    .answer-card {
      will-change: transform, opacity;
      transition: all var(--duration-normal) var(--ease-out);
      border-radius: var(--border-radius-lg);
    }
    .answer-card.highlighted {
      border: 4px solid transparent;
      border-image: none !important;
      box-shadow: 0 0 15px rgba(250,204,21,0.6);
      transform: scale(1.02);
      z-index: 2;
      background:
        linear-gradient(var(--glass-bg), var(--glass-bg)) padding-box,
        linear-gradient(90deg, var(--color-accent), var(--color-primary)) border-box;
      background-clip: padding-box, border-box;
    }
    .answer-card:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 8px 25px rgba(139,233,253,0.3);
    }
    .answer-card:focus-visible {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 8px 25px rgba(139,233,253,0.3);
    }
    .answer-card.highlighted:hover {
      transform: translateY(-4px) scale(1.04);
    }
    /* ハイライトバッジのスタイル */
    .highlight-badge {
      position: absolute;
      top: 0.25rem;
      right: 0.25rem;
      width: 1.5rem;
      height: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #facc15;
      filter: drop-shadow(0 0 4px rgba(250, 204, 21, 0.7));
    }
    /* リアクションボタンの背景グラデーションとボーダーカラー */
    .answer-card.reaction-bg-like { border-color:#ef4444 !important; border-image:none; }
    .answer-card.reaction-bg-understand { border-color:#fbbf24 !important; border-image:none; }
    .answer-card.reaction-bg-curious { border-color:#10b981 !important; border-image:none; }
    .reaction-bg-like-understand,
    .reaction-bg-like-curious,
    .reaction-bg-understand-curious,
    .reaction-bg-all {
      border-color: transparent;
      border-style: solid;
      background: var(--glass-bg);
      border-image-slice: 1;
      border-image-source: linear-gradient(90deg,#ef4444,#fbbf24);
    }
    .reaction-bg-like-curious {
      border-image-source: linear-gradient(90deg,#ef4444,#10b981);
    }
    .reaction-bg-understand-curious {
      border-image-source: linear-gradient(90deg,#fbbf24,#10b981);
    }
    .reaction-bg-all {
      border-image-source: linear-gradient(90deg,#ef4444,#fbbf24,#10b981);
    }
    /* リアクション総数に応じたボーダー太さ */
    .reaction-border-1 { border-width: 2px; }
    .reaction-border-2 { border-width: 4px; }
    .reaction-border-3 { border-width: 6px; }
    /* 回答プレビューの表示制限と省略 */
    .answer-preview { display: -webkit-box; -webkit-line-clamp: 5; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; min-height: 120px; }
    /* いいねボタンのSVGトランジション */
    .like-btn svg { transition: all 0.2s ease-in-out; fill: none; }
    .like-btn.liked svg { stroke: transparent; fill: currentColor; transform: scale(1.1); }
    /* ハイライトボタンのスタイル */
    .highlight-btn {
      transition: all 0.2s ease;
      border-radius: 4px;
      padding: 2px;
    }
    .highlight-btn:hover {
      background: rgba(250, 204, 21, 0.1);
      transform: scale(1.1);
    }
    .highlight-btn.liked {
      color: #facc15;
      filter: drop-shadow(0 0 4px rgba(250, 204, 21, 0.7));
    }
    /* フッターコントロールのポインターイベント */
    #controlsFooter { pointer-events: none; }
    #controlsFooter > .glass-panel { pointer-events: auto; }
    /* スケルトンローディングのスタイル */
    .skeleton { position: relative; overflow: hidden; background-color: rgba(255,255,255,0.05); color: transparent; }
    .skeleton::after { content: ""; position: absolute; inset: 0; background-image: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.3), rgba(255,255,255,0)); animation: skeleton-loading 1.2s infinite; }
    @keyframes skeleton-loading { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

    /* 新着コンテンツ通知バナー */
    .new-content-banner {
      position: fixed;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      border-radius: 0.5rem;
      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0;
      visibility: hidden;
    }

    .new-content-banner.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    .new-content-banner:hover {
      transform: translateX(-50%) translateY(-2px);
      box-shadow: 0 15px 35px rgba(16, 185, 129, 0.6);
    }

    /* アニメーション定義 */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      75% { transform: translateX(4px); }
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .fade-in { animation: fadeIn 0.3s ease-out; }
    .pulse { animation: pulse 1.5s ease-in-out infinite; }
    .shake { animation: shake 0.5s ease-in-out; }
    .spin { animation: spin 1s linear infinite; }

    /* スクリーンリーダー専用クラス（アクセシビリティ） */
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
</style>