<script>
/**
 * 互換性レイヤー - 複雑な履歴システムとの互換性を維持
 * 既存のコードからの呼び出しに対して簡単なフォールバックを提供
 */

// 互換性関数: loadSimpleHistoryTable
if (typeof loadSimpleHistoryTable === 'undefined') {
  window.loadSimpleHistoryTable = function() {
    if (typeof updateHistoryTable === 'function') {
      updateHistoryTable();
    } else {
      console.warn('⚠️ updateHistoryTable関数が利用できません');
    }
  };
}

// 互換性関数: getHistoryFromStorage（レガシー）
if (typeof getHistoryFromStorage === 'undefined') {
  window.getHistoryFromStorage = function() {
    return getSimpleHistory();
  };
}

// 互換性関数: saveHistoryToStorage（レガシー）
if (typeof saveHistoryToStorage === 'undefined') {
  window.saveHistoryToStorage = function(historyArray) {
    saveSimpleHistory(historyArray);
  };
}

// 互換性関数: saveToHistory（レガシー）
if (typeof saveToHistory === 'undefined') {
  window.saveToHistory = function(historyItem) {
    addToSimpleHistory(historyItem);
  };
}

// HistoryManager の互換レイヤー
if (!window.HistoryManager) {
  window.HistoryManager = {
    renderTable: function() {
      if (typeof updateHistoryTable === 'function') {
        updateHistoryTable();
      }
      return true;
    },
    addToHistory: function(item) {
      if (typeof addToSimpleHistory === 'function') {
        addToSimpleHistory(item);
      }
    },
    _initialized: true
  };
}

console.log('✅ 履歴システム互換性レイヤー初期化完了');
</script>