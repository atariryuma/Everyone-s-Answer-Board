<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <base target="_top" />
    <title>StudyQuest - ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ä¸­</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Optimized Permissions Policy - essential permissions only -->
    <!-- Shared Security Headers -->
    <?!= include('SharedSecurityHeaders'); ?>

    <!-- TailwindCSS Optimized Loading - highest priority, no warnings -->
    <script>
      // Complete TailwindCSS warning suppression and early configuration
      window.__TAILWIND_DISABLE_TOUCH__ = true;
      window.tailwind = {
        config: {
          corePlugins: { preflight: false },
          important: true,
        },
      };

      // Suppress TailwindCSS production warnings immediately
      const originalWarn = console.warn;
      console.warn = function (...args) {
        const message = args.join(' ');
        if (
          message.includes('cdn.tailwindcss.com should not be used in production') ||
          message.includes('tailwind') ||
          message.includes('TailwindCSS')
        ) {
          return; // Completely suppress
        }
        originalWarn.apply(console, args);
      };
    </script>
    <!-- Shared TailwindCSS Configuration -->
    <?!= include('SharedTailwindConfig'); ?>

    <!-- Shared Styles and Utilities -->
    <?!= include('UnifiedStyles'); ?> <?!= include('SharedUtilities'); ?>
    <style>
      .pulse-slow {
        animation: pulse 2s infinite;
      }
      .fade-in {
        animation: fadeIn 0.8s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .restriction-notice {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
        border: 1px solid rgba(239, 68, 68, 0.3);
        backdrop-filter: blur(10px);
      }
      .scenario-message {
        background: linear-gradient(
          135deg,
          rgba(59, 130, 246, 0.1) 0%,
          rgba(37, 99, 235, 0.1) 100%
        );
        border: 1px solid rgba(59, 130, 246, 0.3);
        backdrop-filter: blur(10px);
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white min-h-screen flex items-center justify-center"
  >
    <div class="container mx-auto px-4 py-8 max-w-4xl">
      <div class="text-center fade-in">
        <!-- ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
        <div class="glass-panel rounded-2xl p-8 shadow-2xl mb-8">
          <div class="mb-6">
            <div
              class="w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-r from-red-500/20 to-orange-500/20 flex items-center justify-center border-2 border-red-400/30 pulse-slow"
            >
              <svg
                class="w-12 h-12 text-red-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
                ></path>
              </svg>
            </div>
            <h1 class="text-3xl font-bold mb-2 text-red-300">ã‚¢ã‚¯ã‚»ã‚¹ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™</h1>
            <p class="text-gray-400 text-lg">ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç¾åœ¨åˆ©ç”¨ã§ãã¾ã›ã‚“</p>
          </div>

          <? if (typeof userEmail !== 'undefined' && userEmail) { ?>
          <div class="mb-6 p-3 bg-gray-700/50 rounded-lg">
            <p class="text-sm text-gray-300">
              ãƒ¦ãƒ¼ã‚¶ãƒ¼: <span class="text-cyan-400 font-medium"><?= userEmail ?></span>
            </p>
          </div>
          <? } ?>

          <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æƒ…å ± -->
          <div class="grid md:grid-cols-2 gap-4 mb-8">
            <div class="bg-gray-700/30 rounded-lg p-4">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <span class="text-sm font-medium">ã‚¢ã‚¯ã‚»ã‚¹çŠ¶æ…‹</span>
              </div>
              <p class="text-gray-400 text-sm">åˆ¶é™ä¸­ï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ï¼‰</p>
            </div>
            <div class="bg-gray-700/30 rounded-lg p-4">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-3 h-3 rounded-full bg-orange-500"></div>
                <span class="text-sm font-medium">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹</span>
              </div>
              <p class="text-gray-400 text-sm">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–ä¸­</p>
            </div>
          </div>
        </div>

        <!-- ã‚·ãƒŠãƒªã‚ªåˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="scenario-message rounded-2xl p-6 mb-6">
          <h2 class="text-xl font-bold mb-4 text-blue-300 flex items-center justify-center gap-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01 M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"
              ></path>
            </svg>
            ã”æ¡ˆå†…
          </h2>

          <div class="space-y-4 text-left">
            <!-- ä¸€æ™‚çš„ãªåœæ­¢ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ -->
            <div class="bg-gray-700/30 rounded-lg p-4">
              <h3 class="text-lg font-semibold text-yellow-300 mb-2">ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹</h3>
              <p class="text-gray-300 text-sm">
                ã‚·ã‚¹ãƒ†ãƒ ã®æ”¹å–„ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã®ãŸã‚ã€ä¸€æ™‚çš„ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã—ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
                é€šå¸¸ã¯çŸ­æ™‚é–“ã§å¾©æ—§ã„ãŸã—ã¾ã™ã€‚
              </p>
            </div>

            <!-- ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– -->
            <div class="bg-gray-700/30 rounded-lg p-4">
              <h3 class="text-lg font-semibold text-purple-300 mb-2">ğŸ“¦ ã‚·ã‚¹ãƒ†ãƒ çµ‚äº†</h3>
              <p class="text-gray-300 text-sm">
                ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯é‹ç”¨æœŸé–“ãŒçµ‚äº†ã—ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚Œã¾ã—ãŸã€‚
                æ–°ã—ã„ã‚·ã‚¹ãƒ†ãƒ ã®æ¡ˆå†…ã«ã¤ã„ã¦ã¯ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
              </p>
            </div>

            <!-- é•åå¯¾å¿œ -->
            <div class="bg-gray-700/30 rounded-lg p-4">
              <h3 class="text-lg font-semibold text-red-300 mb-2">âš ï¸ åˆ©ç”¨è¦ç´„é•å</h3>
              <p class="text-gray-300 text-sm">
                åˆ©ç”¨è¦ç´„ã«é•åã™ã‚‹è¡Œç‚ºãŒç¢ºèªã•ã‚ŒãŸãŸã‚ã€ä¸€æ™‚çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚
                è©³ç´°ã«ã¤ã„ã¦ã¯ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
              </p>
            </div>

            <!-- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç®¡ç† -->
            <div class="bg-gray-700/30 rounded-lg p-4">
              <h3 class="text-lg font-semibold text-cyan-300 mb-2">âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­å®šä¸­</h3>
              <p class="text-gray-300 text-sm">
                æ–°ã—ã„æ©Ÿèƒ½ã®è¿½åŠ ã‚„ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã®å¤‰æ›´ä½œæ¥­ä¸­ã®ãŸã‚ã€ä¸€æ™‚çš„ã«åˆ©ç”¨ã‚’åœæ­¢ã—ã¦ã„ã¾ã™ã€‚
                è¨­å®šå®Œäº†å¾Œã€è‡ªå‹•çš„ã«åˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
              </p>
            </div>
          </div>
        </div>

        <!-- ç®¡ç†è€…å‘ã‘æƒ…å ± -->
        <? if (typeof isSystemAdmin !== 'undefined' && isSystemAdmin) { ?>
        <div class="restriction-notice rounded-2xl p-6">
          <h3
            class="text-lg font-semibold text-orange-300 mb-3 flex items-center justify-center gap-2"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 7a2 2 0 012 2m0 0a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2m0 0V7a2 2 0 012-2m6 0V5a2 2 0 00-2-2H7a2 2 0 00-2 2v2m6 0a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2"
              ></path>
            </svg>
            ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…æƒ…å ±
          </h3>
          <div class="bg-gray-700/50 rounded-lg p-4">
            <p class="text-sm text-gray-300 mb-3">
              ã‚ãªãŸã¯ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
            </p>
            <div class="text-center">
              <a
                href="?mode=appSetup"
                class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-semibold rounded-xl transition-all transform hover:scale-105 shadow-lg"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                ã‚¢ãƒ—ãƒªè¨­å®šç”»é¢ã¸
              </a>
            </div>
          </div>
        </div>
        <? } ?>

        <!-- ãƒ•ãƒƒã‚¿ãƒ¼æƒ…å ± -->
        <div class="mt-8 text-center">
          <p class="text-xs text-gray-500">
            StudyQuest ã¿ã‚“ãªã®å›ç­”ãƒœãƒ¼ãƒ‰ <? if (typeof timestamp !== 'undefined' && timestamp) { ?>
            <br />ç¢ºèªæ™‚åˆ»: <?= timestamp ?> <? } ?>
          </p>
        </div>
      </div>
    </div>

    <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ -->
    <div id="message-area" class="fixed top-20 right-4 z-50" aria-live="polite" role="status"></div>
  </body>
</html>
