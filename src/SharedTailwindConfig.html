<!-- Shared TailwindCSS CDN Configuration -->
<!-- 手軽さ重視のCDN読み込み方式 - 統一設定 -->
<script>
  // Tailwind CDN production警告とその他の警告を抑制
  (function() {
    if (typeof console !== 'undefined' && console.warn) {
      const originalWarn = console.warn;
      const originalInfo = console.info;
      const originalLog = console.log;
      const originalError = console.error;
      
      // 抑制するパターン
      const suppressPatterns = [
        'cdn.tailwindcss.com should not be used in production',
        'tailwindcss.com should not be used in production',
        'should not be used in production',
        'TailwindCSS',
        'Tailwind CSS',
        'tailwind',
        'PostCSS plugin',
        'Tailwind CLI',
        '-ms-high-contrast is in the process of being deprecated',
        'Permissions Policy',
        'unrecognized feature',
        'ambient-light-sensor',
        'speaker',
        'vibrate',
        'vr'
      ];
      
      function shouldSuppress(args) {
        const message = args[0] ? String(args[0]).toLowerCase() : '';
        return suppressPatterns.some(pattern => {
          const regex = new RegExp(pattern.toLowerCase(), 'i');
          return regex.test(message);
        });
      }
      
      // 警告抑制
      console.warn = function(...args) {
        if (!shouldSuppress(args)) {
          originalWarn.apply(console, args);
        }
      };
      
      console.info = function(...args) {
        if (!shouldSuppress(args)) {
          originalInfo.apply(console, args);
        }
      };
      
      console.log = function(...args) {
        if (!shouldSuppress(args)) {
          originalLog.apply(console, args);
        }
      };
      
      console.error = function(...args) {
        if (!shouldSuppress(args)) {
          originalError.apply(console, args);
        }
      };
    }
  })();

  // TailwindCSS設定 - JIT生成内容を絞り込む
  window.tailwind = {
    config: {
      mode: 'jit',
      corePlugins: { 
        preflight: false // 既存CSSとの競合を防ぐ
      },
      theme: {
        extend: {
          colors: {
            // プロジェクト共通カラー（既存CSS変数に合わせる）
            primary: '#8be9fd',
            background: '#1a1b26',
            surface: 'rgba(26, 27, 38, 0.95)',
            text: '#c0caf5',
            border: 'rgba(255, 255, 255, 0.1)',
            accent: '#facc15',
            success: '#10b981',
            error: '#ef4444',
            warning: '#f59e0b'
          },
          backdropBlur: {
            'xs': '2px',
            'sm': '4px',
            'md': '12px',
            'lg': '20px'
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-out',
            'slide-up': 'slideUp 0.3s ease-out',
            'pulse-soft': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite'
          }
        }
      },
      // よく使用されるクラスを事前定義（JIT最適化）
      safelist: [
        'glass-panel',
        'btn',
        'btn-primary',
        'btn-secondary',
        'btn-danger',
        'btn-warning',
        'loading-overlay',
        'spinner',
        'fade-in',
        'text-cyan-400',
        'text-purple-400',
        'text-green-400',
        'text-red-400',
        'bg-gray-800',
        'bg-gray-700',
        'border-gray-600'
      ]
    }
  };
</script>

<!-- TailwindCSS CDN読み込み - 同期読み込みでpage.cssより先に確実に適用 -->
<script src="https://cdn.tailwindcss.com" onerror="handleTailwindLoadError()"></script>

<!-- Tailwind CDN読み込み失敗時のフォールバック処理 -->
<script>
  function handleTailwindLoadError() {
    console.warn('TailwindCSS CDN failed to load, applying fallback styles');
    // bodyタグにtailwind-fallbackクラスを追加
    if (document.body) {
      document.body.classList.add('tailwind-fallback');
    } else {
      // DOMReady時に追加
      document.addEventListener('DOMContentLoaded', function() {
        document.body.classList.add('tailwind-fallback');
      });
    }
  }
  
  // Tailwind読み込み成功チェック（3秒後）
  setTimeout(function() {
    if (!window.tailwindConfig && !document.querySelector('style[data-source="tailwindcss"]')) {
      console.warn('TailwindCSS may not have loaded properly, applying fallback');
      handleTailwindLoadError();
    }
  }, 3000);
</script>